<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="biz.riman.erp.batch.mapper.BatchMapper">
    	<select id="selectBatchList" resultType="biz.riman.erp.batch.dto.BatchDto">
      		/* BatchMapper.selectBatchList */
      		SELECT batch_id
                ,batch_class_name
                ,batch_name
                ,cron_option
                ,use_flag
      		  FROM erp_batch_setting
      		 WHERE use_flag = 'Y'
    	</select>
	
    	<select id="getBatch" resultType="biz.riman.erp.batch.dto.BatchDto">
    		  /* BatchMapper.getBatch */
          SELECT batch_id
                ,batch_class_name
                ,batch_name
                ,cron_option
                ,use_flag
            FROM erp_batch_setting
    		   WHERE batch_class_name = #{batchClassName}
    	</select>
    	
    	<select id="findBatchById" resultType="int">
      		/* BatchMapper.findBatchById */
      		SELECT COUNT(*)
      		  FROM erp_batch_setting
      		 WHERE batch_class_name = #{batchClassName}
      		   AND use_flag = 'Y'
    	</select>
    	
    	<insert id="insertBatchLog" parameterType="biz.riman.erp.batch.dto.BatchHisDto">
    		  /* BatchMapper.insertBatchLog */
          INSERT INTO erp_batch_his
          (
              batch_class_name
              , batch_name
              , success_yn
              , exceptions
              , start_datetime
              , end_datetime
          )
    		  VALUES (
      		    #{batchClassName}
      		    , #{batchName}
      		    , #{successYn}
      		    , #{exceptions}
      		    , #{startDatetime}
      		    , #{endDatetime}
    		  )
    	</insert>
</mapper>